(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n(71)},40:function(e,t,n){},68:function(e,t){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(32),i=n.n(s),r=(n(40),n(2)),c=n(3),l=n(6),h=n(4),u=n(5),d=n(8),m=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"main-header"},o.a.createElement("a",{href:"",className:"logo"},o.a.createElement("span",{className:"logo-mini"},o.a.createElement("b",null,"SM"),"M"),o.a.createElement("span",{className:"logo-lg"},o.a.createElement("b",null,"SMarket"),"Monitor")),o.a.createElement("nav",{className:"navbar navbar-static-top"},o.a.createElement("a",{href:"",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},o.a.createElement("span",{className:"sr-only"},"Toggle navigation"))))}}]),t}(a.Component),p=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("aside",{className:"main-sidebar"},o.a.createElement("section",{className:"sidebar"},o.a.createElement("form",{action:"#",method:"get",className:"sidebar-form"},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",name:"q",className:"form-control",placeholder:"Filter..."}),o.a.createElement("span",{className:"input-group-btn"},o.a.createElement("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat"},o.a.createElement("i",{className:"fa fa-search"}))))),o.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},o.a.createElement("li",{className:"header"},"Controls"),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.viewChange()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"3D View"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.toggleTurn()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"ToggleTurn"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.clearLogs()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Clear"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.addLog()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Add Node"),o.a.createElement("span",{className:"pull-right-container"}))))))}}]),t}(a.Component),g=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.log;return o.a.createElement("li",null,o.a.createElement("i",{className:"fa fa-envelope bg-blue"}),o.a.createElement("div",{className:"timeline-item"},o.a.createElement("span",{className:"time"},o.a.createElement("i",{className:"fa fa-clock-o"})," ",e.time),o.a.createElement("h3",{className:"timeline-header"},o.a.createElement("a",{href:"#"},e.msgType)),o.a.createElement("div",{className:"timeline-body"},e.chType,", ",e.dst,", ",e.arg)))}}]),t}(a.Component),v=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"filterVal",value:function(){var e=this.refs.myInput.value;this.props.onFilterVal(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"box-tools"},o.a.createElement("div",{className:"input-group input-group-sm",style:{width:"200px"}},o.a.createElement("input",{type:"text",ref:"myInput",defaultValue:"",onKeyUp:this.filterVal.bind(this),name:"table_search",className:"form-control pull-right",placeholder:"\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u7d5e\u308a\u8fbc\u3080"}),o.a.createElement("div",{class:"input-group-btn"},o.a.createElement("button",{className:"btn btn-default"},o.a.createElement("i",{class:"fa fa-search"})))))}}]),t}(a.Component),f=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"sortByAsc",value:function(e){e.preventDefault(),this.props.onSortByAsc(e.target.value)}},{key:"sortByDesc",value:function(e){e.preventDefault(),this.props.onSortByDesc(e.target.value)}},{key:"render",value:function(){return o.a.createElement("div",{class:"info-box"},o.a.createElement("span",{class:"info-box-icon bg-yellow"},o.a.createElement("i",{class:"fa fa-sort-amount-desc"})),o.a.createElement("div",{class:"info-box-content"},o.a.createElement("span",{class:"info-box-text"},"\u65e5\u4ed8\u3067\u30bd\u30fc\u30c8\u3059\u308b"),o.a.createElement("div",{class:"btn-group"},o.a.createElement("button",{className:"btn btn-default",onClick:this.sortByAsc.bind(this),value:"time"},"\u6607\u9806"),o.a.createElement("button",{className:"btn btn-default",onClick:this.sortByDesc.bind(this),value:"time"},"\u964d\u9806"))))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={logs:n.props.logs},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"handleFilter",value:function(e){var t=this.props.logs.filter(function(t){return t.msgType.indexOf(e)>=0||t.msgType.toLowerCase().indexOf(e)>=0||t.src.toString().indexOf(e)>=0||t.arg.indexOf(e)>=0||t.arg.toLowerCase().indexOf(e)>=0});this.setState({logs:t})}},{key:"handleSortByAsc",value:function(e){var t=this.state.logs.sort(function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0});this.setState({logs:t})}},{key:"handleSortByDesc",value:function(e){var t=this.state.logs.sort(function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0});this.setState({logs:t})}},{key:"render",value:function(){var e=this.state.logs.map(function(e,t){return o.a.createElement(g,{log:e,key:t})});return o.a.createElement("section",{className:"content"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},o.a.createElement(f,{onSortByAsc:this.handleSortByAsc.bind(this),onSortByDesc:this.handleSortByDesc.bind(this)}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"box-header"},o.a.createElement("h3",{className:"box-title"},"SM Market Logs"),o.a.createElement(v,{onFilterVal:this.handleFilter.bind(this)}))),o.a.createElement("ul",{className:"timeline"},e))))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={component:n.props.component,args:n.props.args},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"content-wrapper"},o.a.createElement(this.state.component,this.state.args,""))}}]),t}(a.Component),b=n(1),E=function(e){function t(e,n){var a;Object(r.a)(this,t),a=Object(l.a)(this,Object(h.a)(t).call(this));var o=Object(d.a)(Object(d.a)(a)),s={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};a.object=e,a.domElement=void 0!==n?n:document,a.enabled=!0,a.screen={left:0,top:0,width:0,height:0},a.rotateSpeed=1,a.zoomSpeed=1.2,a.panSpeed=.3,a.noRotate=!1,a.noZoom=!1,a.noPan=!1,a.staticMoving=!1,a.dynamicDampingFactor=.2,a.minDistance=0,a.maxDistance=1/0,a.keys=[65,83,68],a.target=new b.u;var i=new b.u,c=s.NONE,u=s.NONE,m=new b.u,p=new b.t,g=new b.t,v=new b.u,f=0,y=new b.t,w=new b.t,E=0,O=0,k=new b.t,N=new b.t;a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.up0=a.object.up.clone();var j={type:"change"},M={type:"start"},x={type:"end"};a.handleResize=function(){if(a.domElement===document)a.screen.left=0,a.screen.top=0,a.screen.width=window.innerWidth,a.screen.height=window.innerHeight;else{var e=a.domElement.getBoundingClientRect(),t=a.domElement.ownerDocument.documentElement;a.screen.left=e.left+window.pageXOffset-t.clientLeft,a.screen.top=e.top+window.pageYOffset-t.clientTop,a.screen.width=e.width,a.screen.height=e.height}},a.handleEvent=function(e){console.log("Event"+e),"function"===typeof a[e.type]&&a[e.type](e)};var C=function(){var e=new b.t;return function(t,n){return e.set((t-o.screen.left)/o.screen.width,(n-o.screen.top)/o.screen.height),e}}(),S=function(){var e=new b.t;return function(t,n){return e.set((t-.5*o.screen.width-o.screen.left)/(.5*o.screen.width),(o.screen.height+2*(o.screen.top-n))/o.screen.width),e}}();function L(e){!1!==o.enabled&&(window.removeEventListener("keydown",L),u=c,c===s.NONE&&(e.keyCode!==o.keys[s.ROTATE]||o.noRotate?e.keyCode!==o.keys[s.ZOOM]||o.noZoom?e.keyCode!==o.keys[s.PAN]||o.noPan||(c=s.PAN):c=s.ZOOM:c=s.ROTATE))}function T(){!1!==o.enabled&&(c=u,window.addEventListener("keydown",L,!1))}function D(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),c!==s.ROTATE||o.noRotate?c!==s.ZOOM||o.noZoom?c!==s.PAN||o.noPan||N.copy(C(e.pageX,e.pageY)):w.copy(C(e.pageX,e.pageY)):(p.copy(g),g.copy(S(e.pageX,e.pageY))))}function A(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),c=s.NONE,document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",A),o.dispatchEvent(x))}function P(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),c===s.NONE&&(c=e.button),c!==s.ROTATE||o.noRotate?c!==s.ZOOM||o.noZoom?c!==s.PAN||o.noPan||(k.copy(C(e.pageX,e.pageY)),N.copy(k)):(y.copy(C(e.pageX,e.pageY)),w.copy(y)):(g.copy(S(e.pageX,e.pageY)),p.copy(g)),document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",A,!1),o.dispatchEvent(M))}function I(e){if(!1!==o.enabled){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),y.y+=.01*t,o.dispatchEvent(M),o.dispatchEvent(x)}}function R(e){if(!1!==o.enabled){switch(e.touches.length){case 1:c=s.TOUCH_ROTATE,g.copy(S(e.touches[0].pageX,e.touches[0].pageY)),p.copy(g);break;case 2:c=s.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;O=E=Math.sqrt(t*t+n*n);var a=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(C(a,i)),N.copy(k);break;default:c=s.NONE}o.dispatchEvent(M)}}function z(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:p.copy(g),g.copy(S(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;O=Math.sqrt(t*t+n*n);var a=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;N.copy(C(a,i));break;default:c=s.NONE}}function X(e){if(!1!==o.enabled){switch(e.touches.length){default:break;case 1:g.copy(S(e.touches[0].pageX,e.touches[0].pageY)),p.copy(g);break;case 2:E=O=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;N.copy(C(t,n)),k.copy(N)}c=s.NONE,o.dispatchEvent(x)}}function Y(e){e.preventDefault()}return a.rotateCamera=function(){var e,t=new b.u,n=new b.n,a=new b.u,s=new b.u,i=new b.u,r=new b.u;return function(){r.set(g.x-p.x,g.y-p.y,0),(e=r.length())?(m.copy(o.object.position).sub(o.target),a.copy(m).normalize(),s.copy(o.object.up).normalize(),i.crossVectors(s,a).normalize(),s.setLength(g.y-p.y),i.setLength(g.x-p.x),r.copy(s.add(i)),t.crossVectors(r,m).normalize(),e*=o.rotateSpeed,n.setFromAxisAngle(t,e),m.applyQuaternion(n),o.object.up.applyQuaternion(n),v.copy(t),f=e):!o.staticMoving&&f&&(f*=Math.sqrt(1-o.dynamicDampingFactor),m.copy(o.object.position).sub(o.target),n.setFromAxisAngle(v,f),m.applyQuaternion(n),o.object.up.applyQuaternion(n)),p.copy(g)}}(),a.zoomCamera=function(){var e;c===s.TOUCH_ZOOM_PAN?(e=E/O,E=O,m.multiplyScalar(e)):1!==(e=1+(w.y-y.y)*o.zoomSpeed)&&e>0&&(m.multiplyScalar(e),o.staticMoving?y.copy(w):y.y+=(w.y-y.y)*a.dynamicDampingFactor)},a.panCamera=function(){var e=new b.t,t=new b.u,n=new b.u;return function(){e.copy(N).sub(k),e.lengthSq()&&(e.multiplyScalar(m.length()*o.panSpeed),n.copy(m).cross(o.object.up).setLength(e.x),n.add(t.copy(o.object.up).setLength(e.y)),o.object.position.add(n),o.target.add(n),o.staticMoving?k.copy(N):k.add(e.subVectors(N,k).multiplyScalar(o.dynamicDampingFactor)))}}(),a.checkDistances=function(){o.noZoom&&o.noPan||(m.lengthSq()>o.maxDistance*o.maxDistance&&(o.object.position.addVectors(o.target,m.setLength(o.maxDistance)),y.copy(w)),m.lengthSq()<o.minDistance*o.minDistance&&(o.object.position.addVectors(o.target,m.setLength(o.minDistance)),y.copy(w)))},a.update=function(){m.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||o.zoomCamera(),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,m),o.checkDistances(),o.object.lookAt(o.target),i.distanceToSquared(o.object.position)>1e-6&&(o.dispatchEvent(j),i.copy(o.object.position))},a.reset=function(){c=s.NONE,u=s.NONE,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),m.subVectors(o.object.position,o.target),o.object.lookAt(o.target),o.dispatchEvent(j),i.copy(o.object.position)},a.dispose=function(){a.domElement.removeEventListener("contextmenu",Y,!1),a.domElement.removeEventListener("mousedown",P,!1),a.domElement.removeEventListener("mousewheel",I,!1),a.domElement.removeEventListener("DOMMouseScroll",I,!1),a.domElement.removeEventListener("touchstart",R,!1),a.domElement.removeEventListener("touchend",X,!1),a.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",L,!1),window.removeEventListener("keyup",T,!1)},a.domElement.addEventListener("contextmenu",Y,!1),a.domElement.addEventListener("mousedown",P,!1),a.domElement.addEventListener("mousewheel",I,!1),a.domElement.addEventListener("DOMMouseScroll",I,!1),a.domElement.addEventListener("touchstart",R,!1),a.domElement.addEventListener("touchend",X,!1),a.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",L,!1),window.addEventListener("keyup",T,!1),a.handleResize(),a.update(),a}return Object(u.a)(t,e),t}(b.b),O=n(33),k=function(e){function t(e,n){var a;return Object(r.a)(this,t),console.log("World3DView!"),(a=Object(l.a)(this,Object(h.a)(t).call(this,e,n))).cpw=10,a.lpw=50,a.coreCount=3,a.yaw=0,a.text2d=[],a.cameraPosition=new b.u(0,0,100),a.element=null,a.mcount=0,a.visible=!1,a.log=a.props.log,a.store=a.props.store,a.state={cameraRotation:new b.a(-1.2,0,0),width:window.innerWidth,height:window.innerHeight-50},a.vertexShaderStr="",a.fragmentShaderStr="",a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getCoreVector",value:function(e,t){return new b.u(this.cpw*Math.cos(2*Math.PI/this.coreCount*e),t,this.cpw*Math.sin(2*Math.PI/this.coreCount*e))}},{key:"rotateCamera",value:function(e){var t=new b.g,n=new b.g;this.yaw=this.camera.rotation.y,this.pitch=this.camera.rotation.x,this.roll=this.camera.rotation.z,this.yaw+=e,t.multiplyMatrices(n.makeRotationY(this.yaw),t),t.multiplyMatrices(n.makeRotationX(this.pitch),t),t.multiplyMatrices(n.makeRotationZ(this.roll),t),this.camera.position.copy(new b.u(0,0,110).applyMatrix4(t)),this.camera.rotation.y=this.yaw}},{key:"onAnimate",value:function(){if(this.visible){this.controls?this.controls.update():console.log("no control");var e=this.lpw,t=this.store.getMsgCount();if(this.mcount>500);else if(t>this.mcount){for(var n=this.mcount;n<t;n++){var a=this.store.getMsg(n),o=this.store.getNodeIndex(a.getSrcNodeID()),s=new b.c,i=20-1.8*n,r=this.getCoreVector(a.getChType(),i-.9),c=new b.u(e*Math.cos(2*Math.PI/8*o),i,e*Math.sin(2*Math.PI/8*o));s.vertices.push(c,r);var l=a.getMsgType()+":"+a.getArgs();this.add2dRenderText(l,c,!0);var h=new b.e(s,this.mesMaterial);this.mgroup.add(h)}this.mcount=t}this.props.turn,this.renderer.render(this.scene,this.camera),this.render2d(),requestAnimationFrame(this.onAnimate.bind(this))}}},{key:"convertWorldToScreenXY",value:function(e){var t=new b.u(e.x,e.y,e.z);t.project(this.camera);var n=this.state.width/2,a=this.state.height/2;return{x:(t.x+1)*n,y:-(t.y-1)*a}}},{key:"add2dRenderText",value:function(e,t,n){var a={text:e,vec:t,withline:n};this.text2d.push(a)}},{key:"render2d",value:function(){var e=this.canvas2dctx;e.clearRect(0,0,this.state.width,this.state.height),e.strokeStyle="white",e.lineWidth=2,e.font="16px sans-serif",e.fillStyle="white";for(var t=0;t<this.text2d.length;t++){var n=this.text2d[t],a=n.text,o=n.vec,s=n.withline,i=this.convertWorldToScreenXY(o);s?(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+30,i.y-30),e.lineTo(i.x+30+e.measureText(a).width,i.y-30),e.stroke(),e.fillText(a,i.x+30,i.y-30-3)):e.fillText(a,i.x-e.measureText(a).width/2,i.y-3)}}},{key:"componentWillUnmount",value:function(){this.visible=!1}},{key:"componentDidMount",value:function(){console.log("WorldView did mount"),this.visible=!0;var e=this.state,t=e.width,n=e.height;this.scene=new b.o,this.camera=new b.l(55,t/n,1e-5,1e4),this.camera.position.set(0,0,110);var a=window.document.querySelector("#threejs");this.canvas2d=window.document.querySelector("#canvas2d"),this.canvas2dctx=this.canvas2d.getContext("2d"),this.renderer=new b.v({antialias:!0,canvas:a});var o=new b.i({color:26282}),s=new b.i({color:13192}),i=new b.i({color:13056}),r=new b.i({color:3368499});this.mesMaterial=new b.i({color:6684723}),o.transparent=!0;for(var c=new b.c,l=this.lpw,h=this.cpw,u=["Lib","RideShare","Ad"],d=0;d<this.coreCount;d++){var m=new b.c;m.vertices.push(new b.u(h*Math.cos(2*Math.PI/this.coreCount*d),20,h*Math.sin(2*Math.PI/this.coreCount*d)),new b.u(h*Math.cos(2*Math.PI/this.coreCount*d),-1e3,h*Math.sin(2*Math.PI/this.coreCount*d))),this.coreLine=new b.e(m,i),this.scene.add(this.coreLine);var p=new b.h(new b.p(1.2),new b.i({color:8925952}));p.position.x=h*Math.cos(2*Math.PI/this.coreCount*d),p.position.y=20,p.position.z=h*Math.sin(2*Math.PI/this.coreCount*d),this.scene.add(p),this.add2dRenderText(u[d],new b.u(h*Math.cos(2*Math.PI/this.coreCount*d),23,h*Math.sin(2*Math.PI/this.coreCount*d)),!1)}for(var g=0;g<180;g++)c.vertices.push(new b.u(l*Math.cos(Math.PI*g/90),20,l*Math.sin(Math.PI*g/90)));this.loop=new b.f(c,o);var v=new b.c;v.vertices.push(new b.u(0,50,0),new b.u(0,-1e3,0)),this.cLine=new b.e(v,r),this.scene.add(this.cLine);var f=this.store.getNodeNum();this.scene.add(this.loop),this.nodes=[],this.nodeLines=[],this.nodeTexts=[],console.log("Now count",f);for(var y=0;y<f;y++){var w=new b.h(new b.p(2.2),new b.j);w.position.x=l*Math.cos(2*Math.PI/f*y),w.position.y=20,w.position.z=l*Math.sin(2*Math.PI/f*y),this.scene.add(w),this.nodes.push(w);var O=new b.c;O.vertices.push(new b.u(w.position.x,20,w.position.z),new b.u(w.position.x,-1e3,w.position.z));var k=new b.e(O,s);this.scene.add(k),this.nodeLines.push(k),this.add2dRenderText("Node"+y,new b.u(w.position.x,23,w.position.z),!1)}this.mgroup=new b.d,this.scene.add(this.mgroup),this.element=window.document.getElementById("viewer");var N=new E(this.camera,this.canvas2d);N.rotateSpeed=2,N.zoomSpeed=3.8,N.panSpeed=1.5,N.noZoom=!1,N.noPan=!1,this.onResizeInner(),N.dynamicDampingFactor=.3,this.controls=N,this.base2dTextSize=this.text2d.length,this.done()}},{key:"done",value:function(){this.onAnimate()}},{key:"onResizeInner",value:function(){var e=document.getElementById("threediv");if(e){var t=e.clientWidth,n=window.innerHeight-50;this.setState({width:t,height:n}),this.camera?(this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n)):console.log("Not yet camera")}}},{key:"render",value:function(){this.state.data;var e,t,n=document.getElementById("threediv");return n?(e=n.clientWidth,t=n.clientHeight,e===this.state.width&&t===this.state.height||(console.log("Diff with state"),this.camera&&(this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)))):(e=this.state.width,t=this.state.height),0===this.store.getMsgCount()&&void 0!==this.mgroup&&(this.mgroup.children=[],this.mcount=0,this.text2d.splice(this.base2dTextSize)),o.a.createElement("div",{id:"threediv",style:{position:"relative"}},o.a.createElement(O.ResizeListener,{onResize:this.onResizeInner.bind(this)}),o.a.createElement("canvas",{id:"threejs",style:{display:"block"},width:e,height:t}),o.a.createElement("canvas",{id:"canvas2d",style:{position:"absolute",left:0,top:0,backgroundColor:"transparent"},width:e,height:t}))}}]),t}(o.a.Component),N=function(){function e(t){Object(r.a)(this,e),this.js=t,this.obj=JSON.parse(t)}return Object(c.a)(e,[{key:"getSrcNodeID",value:function(){return this.obj.src}},{key:"getDstNodeID",value:function(){return this.obj.dst}},{key:"getMsgType",value:function(){return this.obj.msgType}},{key:"getChType",value:function(){return this.obj.chType}},{key:"getArgs",value:function(){return this.obj.arg}}]),e}(),j=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"parseMsg",value:function(e){}}]),e}(),M=function(){function e(){Object(r.a)(this,e),console.log("New Message Store"),this.clear()}return Object(c.a)(e,[{key:"clear",value:function(){this.store=[],this.nodes={},this.nodeList=[]}},{key:"getNodeNum",value:function(){var e=Object.keys(this.nodes).length;return e<8?8:e}},{key:"addNode",value:function(e){if(void 0===this.nodes[e]){var t=new j(e),n=this.nodeList.length;this.nodeList.push(t),this.nodes[e]={node:t,idx:n}}}},{key:"addMsg",value:function(e){var t=new N(e);this.addNode(t.getSrcNodeID()),this.store.length>1e4&&this.store.shift(),this.store.push(t)}},{key:"getMsgCount",value:function(){return this.store.length}},{key:"getMsg",value:function(e){return this.store[e]}},{key:"getNodeIndex",value:function(e){return this.nodes[e].idx}}]),e}(),x=n(34),C=n.n(x),S=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(l.a)(this,Object(h.a)(t).call(this,e));var a=C()();return n.mstore=new M,n.state={logs:[],store:n.mstore,socket:a,turn:!0},a.on("connect",function(){console.log("Socket.IO Connected!")}),a.on("event",n.getEvent.bind(Object(d.a)(Object(d.a)(n)))),a.on("disconnect",function(){console.log("Socket.IO Disconnected!")}),n.selComp=k,n.selArg={logs:n.state.logs,store:n.state.store,turn:n.state.turn},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"addLog",value:function(e,t){var n=this.state.logs,a=JSON.parse(e),o=new Date;999===n.length&&console.log("Log length is now maximum 1000"),n.length>999&&n.shift(),n.push({msgType:a.msgType,chType:a.chType,src:a.src,dst:a.dst,arg:a.arg,value:t,time:o.toLocaleString()}),this.setState({logs:n})}},{key:"getEvent",value:function(e){console.log("GetEvent:",e),this.addLog(e,""),this.mstore.addMsg(e),this.setState({store:this.mstore})}},{key:"clearLogs",value:function(){console.log("App:Clearlog"),this.selArg={logs:[]},this.mstore.clear(),this.setState({logs:this.selArg.logs,store:this.mstore})}},{key:"viewChange",value:function(){this.selComp!==k?(this.selComp=k,this.selArg={logs:this.state.logs,store:this.state.store},this.setState({logs:this.state.logs,turn:this.state.turn,store:this.state.store})):(this.selComp=y,this.selArg={logs:this.state.logs},this.setState({logs:this.state.logs}))}},{key:"addMsg",value:function(){var e='{"src":'+Math.floor(8*Math.random())+"}";this.getEvent(e),this.addLog(e)}},{key:"queryNodeName",value:function(e,t){this.socket.emit("node",e,function(n){console.log("Got! nodeInfo",n),t[e]=n})}},{key:"addDemo",value:function(){this.addLog("Hello","abc")}},{key:"toggleTurn",value:function(){this.setState({turn:!this.state.turn}),this.selArg.turn=this.state.turn}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=o.a.createElement(m,null),n=o.a.createElement(w,{component:this.selComp,args:this.selArg}),a=o.a.createElement(p,{clearLogs:function(){return e.clearLogs()},addLog:function(){return e.addMsg()},viewChange:function(){return e.viewChange()},toggleTurn:function(){return e.toggleTurn()}});return o.a.createElement("div",null,t,a,n)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=o.a.createElement(S,null);i.a.render(L,document.getElementById("root"))}},[[35,2,1]]]);
//# sourceMappingURL=main.82dc3a70.chunk.js.map